# Eventure — Афиша событий

![Java](https://img.shields.io/badge/Java-21-orange?logo=openjdk)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.3.0-brightgreen)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-4169E1?logo=postgresql&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?logo=docker&logoColor=white)
![Maven](https://img.shields.io/badge/Maven-C71A36?logo=apache-maven&logoColor=white)

## О проекте

**Eventure** — это приложение-афиша, где пользователи могут предлагать события (от выставок до походов в кино) и собирать компанию для участия в них. Сервис помогает эффективно планировать досуг и находить единомышленников для совместных мероприятий.

---

## Архитектура

Сервис разделен на два основных модуля:

### Основной сервис (`ewm-main-service`)
Содержит основную бизнес-логику приложения:
- Управление событиями, пользователями и категориями
- Обработка заявок на участие
- Система комментариев и лайков
- Модерация контента

### Сервис статистики (`ewm-stats-service`)
Собирает и анализирует статистику:
- Количество просмотров событий
- Статистика обращений к API
- Аналитика пользовательской активности

---

## Функциональность

### Публичный API
Доступен без регистрации:
- **Поиск и фильтрация событий** с возможностью сортировки по дате или популярности
- **Просмотр подробной информации** о событиях
- **Чтение комментариев** к опубликованным событиям

### Закрытый API
Только для авторизованных пользователей:
- **Создание и редактирование** мероприятий
- **Подача заявок** на участие в событиях
- **Подтверждение/отклонение** заявок от других пользователей
- **Система комментариев**:
  - Добавление, редактирование и удаление комментариев
  - Возможность ставить лайки комментариям
  - Комментирование только опубликованных событий

### Административный API
Для модераторов и администраторов:
- **Управление категориями** событий
- **Модерация событий** — публикация или отклонение
- **Управление пользователями**
- **Закрепление подборок** на главной странице
- **Блокировка комментариев** для конкретных пользователей

---

## Жизненный цикл события

1. **Создание** — пользователь создает событие
2. **Ожидание публикации** — автоматически после создания
3. **Публикация** — подтверждение модератором
4. **Отмена публикации** — может быть выполнена администратором или создателем на этапе ожидания

---

## Технологии

- **Java 21**
- **Spring Boot 3.3.0**
- **Spring Data JPA & Hibernate ORM**
- **PostgreSQL**
- **Maven**
- **Docker & Docker Compose**
- **REST API**

---

## Запуск проекта

### Предварительные требования
- Установленный **Docker** и **Docker Compose**
- **Java 21** (для локальной разработки)

### Инструкция по запуску

1. **Клонируйте репозиторий**
   ```bash
   git clone https://github.com/your-username/java-explore-with-me.git
   cd java-explore-with-me
   ```

2. **Соберите проект**
   ```bash
   mvn clean package
   ```

3. **Запустите все сервисы**
   ```bash
   docker-compose up -d
   ```

После успешного запуска:
- Основной сервис будет доступен на порту `8080`
- Сервис статистики на порту `9090`

---

## Аутентификация и безопасность

Оба сервиса работают в защищенной сети (VPN). Сетевой шлюз отвечает за:
- Аутентификацию и авторизацию пользователей
- Перенаправление запросов в соответствующие сервисы
- Защиту приватных и административных эндпоинтов

## Комментарии и система лайков

### Особенности реализации:
-  Создатель события может отключить комментирование
-  Только авторизованные пользователи могут комментировать
-  Комментировать можно только опубликованные события
-  Администратор может запретить комментирование конкретному пользователю
-  Неавторизованные пользователи могут только просматривать комментарии

### Примеры эндпоинтов:
- `GET /comments/{eventId}` — получение комментариев к событию
- `POST /users/{userId}/comments` — добавление комментария
- `PUT /users/{userId}/comments/{commentId}/like` — лайк комментария
- `DELETE /admin/comments/{commentId}` — удаление комментария администратором
